<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Caption Generator</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #0e0e1a;
      color: #fff;
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 600px;
      margin: 4rem auto;
      padding: 2rem;
      text-align: center;
    }

    input[type="text"] {
      width: 100%;
      padding: 0.6rem;
      border-radius: 0.4rem;
      margin: 0.8rem 0;
      font-size: 1rem;
      border: none;
    }

    .tone-buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }

    .tone-buttons button {
      padding: 0.5rem 1rem;
      background: #282c34;
      color: #fff;
      border: 1px solid #555;
      border-radius: 1rem;
      cursor: pointer;
    }

    .tone-buttons button:hover {
      background: #444;
    }

    button[type="submit"] {
      margin-top: 1rem;
      padding: 0.6rem 1.4rem;
      border: none;
      border-radius: 0.4rem;
      font-size: 1rem;
      cursor: pointer;
      background-color: #6c63ff;
      color: white;
    }

    .captions {
      margin-top: 2rem;
      background-color: #1e1e2f;
      padding: 1rem;
      border-radius: 0.6rem;
    }

    .tutorial-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      backdrop-filter: blur(2px);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .tutorial-box {
      background: linear-gradient(to bottom right, #5e5ce6, #8b88f3);
      color: #fff;
      padding: 2rem;
      border-radius: 1.5rem;
      box-shadow: 0 0 20px rgba(0,0,0,0.4);
      max-width: 380px;
      animation: fadeInScale 0.4s ease-out;
      text-align: center;
      position: relative;
      z-index: 1001;
    }

    .tutorial-box button {
      background: rgba(255,255,255,0.1);
      border: 1px solid #fff;
      color: #fff;
      border-radius: 0.6rem;
      padding: 0.5rem 1rem;
      margin: 0.5rem;
      cursor: pointer;
    }

    @keyframes fadeInScale {
      0% { opacity: 0; transform: scale(0.95); }
      100% { opacity: 1; transform: scale(1); }
    }

    .progress-dots {
      margin-top: 0.8rem;
      font-size: 1.2rem;
      color: rgba(255,255,255,0.7);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Create Your Caption</h1>
    <form method="POST">
      <label for="topic">Topic</label>
      <input type="text" id="topic" name="topic" placeholder="e.g., stronger than yesterday" required value="{{ topic }}">

      <label for="tone">Tone</label>
      <input type="text" id="tone" name="tone" placeholder="e.g., funny, inspiring" required value="{{ tone }}">

      <div class="tone-buttons">
        <button type="button" onclick="addTone('Funny')">Funny</button>
        <button type="button" onclick="addTone('Romantic')">Romantic</button>
        <button type="button" onclick="addTone('Grateful')">Grateful</button>
        <button type="button" onclick="addTone('Chill')">Chill</button>
        <button type="button" onclick="addTone('Nostalgic')">Nostalgic</button>
        <button type="button" onclick="addTone('Sarcastic')">Sarcastic</button>
      </div>

      <button type="submit">Generate Caption</button>
    </form>

    {% if captions %}
    <div class="captions">
      <h2>Generated Captions</h2>
      <pre>{{ captions }}</pre>
    </div>
    {% endif %}
  </div>

{% if tutorial_mode %}
<div class="tutorial-overlay" id="tutorialOverlay">
  <div class="tutorial-box" id="tutorialBox">
    <h3 id="tutorialTitle">Welcome to Caption Generator!</h3>
    <p id="tutorialText">Let’s take a quick tour to help you create amazing Instagram captions. This will only take a minute!</p>

    <div class="progress-dots" id="tutorialProgress">● ○ ○ ○ ○ ○</div>

    <div>
      <button onclick="skipTutorial()">Skip Tour</button>
      <button onclick="nextTutorialStep()">Start Tour</button>
    </div>
  </div>
</div>

<script>
  const tutorialSteps = [
    {
      title: "Welcome to Caption Generator!",
      text: "Let’s take a quick tour to help you create amazing Instagram captions. This will only take a minute!"
    },
    {
      title: "Enter Your Topic",
      text: "Start by describing what your post is about. Be specific for better results."
    },
    {
      title: "Choose a Tone",
      text: "Select one or more tones to match the vibe you want."
    },
    {
      title: "Customize with Text",
      text: "You can write a custom note to blend with the generated caption."
    },
    {
      title: "Click Generate",
      text: "Tap the button to get your captions instantly."
    },
    {
      title: "Done!",
      text: "You're ready to create awesome captions. Let’s go!"
    }
  ];

  let currentStep = 0;

  function updateTutorialBox() {
    document.getElementById("tutorialTitle").innerText = tutorialSteps[currentStep].title;
    document.getElementById("tutorialText").innerText = tutorialSteps[currentStep].text;
    document.getElementById("tutorialProgress").innerHTML = tutorialSteps.map((_, i) => i === currentStep ? "●" : "○").join(" ");
  }

  function nextTutorialStep() {
    if (currentStep < tutorialSteps.length - 1) {
      currentStep++;
      updateTutorialBox();
    } else {
      skipTutorial();
    }
  }

  function skipTutorial() {
    document.getElementById("tutorialOverlay").style.display = "none";
  }

  function addTone(tone) {
    const toneInput = document.getElementById('tone');
    if (!toneInput.value.includes(tone)) {
      toneInput.value = toneInput.value ? toneInput.value + ", " + tone : tone;
    }
  }

  updateTutorialBox();
</script>
{% endif %}
</body>
</html>
